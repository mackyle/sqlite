# 2024 March 3
#
# The author disclaims copyright to this source code.  In place of
# a legal notice, here is a blessing:
#
#    May you do good and not evil.
#    May you find forgiveness for yourself and forgive others.
#    May you share freely, never taking more than you give.
#
#***********************************************************************
# This file implements regression tests for SQLite library.
#

set testdir [file dirname $argv0]
source $testdir/tester.tcl
set testprefix values


do_execsql_test 1.0 {
  CREATE TABLE x1(a, b, c);
}

do_execsql_test 1.1.1 {
  INSERT INTO x1 VALUES(1, 1, 1), (2, 2, 2) UNION ALL SELECT 3, 3, 3;
}

do_execsql_test 1.1.2 {
  SELECT * FROM x1;
} {
  1 1 1
  2 2 2
  3 3 3
}

set a 3
set b 3
set c 4
do_execsql_test 1.2.1 {
  DELETE FROM x1;
  INSERT INTO x1 VALUES(1, 1, 1), (2, 2, 2), ($a, $b, 3), (4, 4, $c);
}

do_execsql_test 1.2.2 {
  SELECT * FROM x1;
} {
  1 1 1
  2 2 2
  3 3 3
  4 4 4
}

do_execsql_test 1.3.1 {
  DELETE FROM x1;
  INSERT INTO x1 VALUES(1, 1, 1), (2, 2, 2) UNION SELECT 1, 2, 3 ORDER BY 1;
}
do_execsql_test 1.3.2 {
  SELECT * FROM x1;
} {
  1 1 1
  1 2 3
  2 2 2
}

do_execsql_test 1.4.0 {
  DELETE FROM x1;
}
do_execsql_test 1.4.1 {
  INSERT INTO x1 VALUES(1, 1, 1), (2, 2, 2) UNION ALL SELECT 1, 2, 3 ORDER BY 1;
}
do_execsql_test 1.4.2 {
  SELECT * FROM x1;
} {
  1 1 1
  1 2 3
  2 2 2
}

do_execsql_test 1.5.1 {
  DELETE FROM x1;
  INSERT INTO x1 
  VALUES(3, 3, 3), (2, 2, 2), (1, 1, 1) EXCEPT SELECT 2, 2, 2;
}
do_execsql_test 1.5.2 {
  SELECT * FROM x1;
} {
  1 1 1
  3 3 3
}

finish_test
